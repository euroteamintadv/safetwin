<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="SafeTwin Platform – monitoraggio predittivo per grandi infrastrutture. Proposta tecnica per Todini Costruzioni Generali." />
  <meta name="theme-color" content="#003366" />
  <title>SafeTwin Platform – Todini Costruzioni Generali</title>

  <!-- Preconnect per performance fonts -->
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link rel="preconnect" href="https://fonts.googleapis.com" />

  <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600;700&family=Libre+Baskerville:wght@700&display=swap" rel="stylesheet" />

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reveal.js@4.6.0/dist/reveal.css" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reveal.js@4.6.0/dist/theme/white.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />

  <link rel="icon" href="LogoTod.png" type="image/png" />

  <style>
    :root{
      --todini-blue:#003366;
      --todini-dark-blue:#002244;
      --todini-green:#006837;
      --todini-light-blue:#3a6ea5;
      --light-gray:#f8f9fa;
      --medium-gray:#e9ecef;
      --dark-gray:#495057;
      --text-gray:#6c757d;
      --spacing-sm:0.7rem;
      --spacing-md:1.4rem;
      --spacing-lg:2.5rem;
      --max-content-width:1200px;
    }

    /* Reset e accessibilità */
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family:'Open Sans',sans-serif;
      color:var(--dark-gray);
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      background:#fff;
      min-height:100vh; /* evita overflow clipping su mobile */
    }

    a.skip-link{
      position:fixed;
      left:-999px;
      top:auto;
      width:1px;
      height:1px;
      overflow:hidden;
    }
    a.skip-link:focus{
      left:1rem;
      top:1rem;
      width:auto;
      height:auto;
      background:#fff;
      color:var(--todini-blue);
      padding:0.5rem 0.75rem;
      z-index:9999;
      box-shadow:0 4px 12px rgba(0,0,0,0.15);
      border-radius:6px;
    }

    .reveal{width:100vw;height:100vh;background:white}
    .reveal .slides{width:100%;height:100%}
    /* Allow vertical scroll inside slides on small screens */
    .reveal section{
      padding:4vh 4vw !important;
      display:flex!important;
      flex-direction:column;
      justify-content:center;
      align-items:flex-start;
      box-sizing:border-box;
      background:white;
      min-height:100%;
      overflow:auto;
      position:relative;
    }

    /* Typography */
    .reveal h1,.reveal h2,.reveal h3{font-family:'Libre Baskerville',serif;color:var(--todini-blue);font-weight:700;line-height:1.2;margin-bottom:1rem}
    .reveal h1{font-size:clamp(2rem,5vw,3.2rem)}
    .reveal h2{font-size:clamp(1.4rem,3.5vw,2.4rem);border-bottom:3px solid var(--todini-green);padding-bottom:1rem;margin-bottom:1.5rem}
    .reveal h3{font-size:clamp(1.1rem,3vw,1.8rem);color:var(--todini-green);margin-bottom:1rem}
    .reveal p{font-size:clamp(0.95rem,2vw,1.15rem);line-height:1.5;margin-bottom:1rem;color:var(--dark-gray)}

    /* Logo */
    .reveal .logo{
      position:absolute;
      top:1.6vh;
      left:2vw;
      height:clamp(36px,7vh,68px);
      z-index:20;
    }

    /* Blue slide */
    .reveal .blue-slide{background:linear-gradient(135deg,var(--todini-blue) 0%,var(--todini-dark-blue) 100%);color:white}
    .reveal .blue-slide h1,.reveal .blue-slide h2,.reveal .blue-slide h3,.reveal .blue-slide p{color:white}
    .reveal .blue-slide h2{border-bottom-color:rgba(255,255,255,0.9)}

    /* Layout containers */
    .content-container{width:100%;max-width:var(--max-content-width);margin:0 auto;display:flex;flex-direction:column;gap:1rem}
    .two-column{display:grid;grid-template-columns:1fr 1fr;gap:3vw;align-items:center;width:100%}
    .text-content{display:flex;flex-direction:column;justify-content:center;min-height:40vh}
    .visual-content{display:flex;flex-direction:column;justify-content:center;align-items:center;min-height:40vh}

    /* Images & media */
    .reveal img{max-width:100%;height:auto;border-radius:8px;box-shadow:0 8px 25px rgba(0,0,0,0.12)}
    .reveal img[loading]{display:block}
    .photo-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:1vh;margin:2vh 0}
    .photo-grid img{width:100%;height:18vh;object-fit:cover;border-radius:6px}

    /* Lists & icons */
    ul.icon-list,ol.icon-list{list-style:none;padding-left:0;margin:0}
    .icon-list li{position:relative;padding-left:48px;margin-bottom:1rem;color:var(--text-gray);font-size:clamp(0.95rem,2vw,1.05rem)}
    .icon-list li i{position:absolute;left:0;top:0;color:var(--todini-blue);font-size:1.2rem;width:40px;text-align:center}
    .blue-slide .icon-list li i{color:white}
    .blue-slide .icon-list li{color:rgba(255,255,255,0.95)}

    /* Proposal grid */
    .proposal-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:1.5rem;margin:2rem 0}
    .proposal-phase{background:white;border-radius:12px;padding:1.5rem;text-align:center;box-shadow:0 6px 20px rgba(0,0,0,0.08);border-top:5px solid var(--todini-green);transition:transform 0.25s ease}
    .proposal-phase:hover{transform:translateY(-6px)}
    .proposal-phase h4{color:var(--todini-blue);margin-bottom:0.5rem}
    .proposal-phase .phase-icon{font-size:2rem;color:var(--todini-green);margin-bottom:0.75rem}
    .proposal-phase p{color:var(--text-gray);margin:0.35rem 0}

    /* Timeline simplified for readability */
    .timeline{width:100%;position:relative;margin:1rem 0}
    .timeline-item{margin-bottom:1rem}
    .timeline-content{padding:1rem;background:white;border-radius:8px;box-shadow:0 4px 12px rgba(0,0,0,0.06)}

    /* Architecture */
    .architecture-container{background:white;border-radius:12px;padding:1.5rem;box-shadow:0 8px 25px rgba(0,0,0,0.12);max-height:60vh;overflow:auto}
    .architecture-layer{margin-bottom:1rem;padding:1rem;border-left:4px solid var(--todini-blue);background:var(--light-gray)}
    .architecture-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:0.8rem}
    .architecture-item{background:white;padding:0.8rem;border-radius:6px;border:1px solid var(--medium-gray);text-align:center}

    /* Video */
    .video-container{width:100%;max-width:900px;margin:0 auto;position:relative}
    .video-container video{width:100%;height:auto;border-radius:12px;box-shadow:0 10px 30px rgba(0,0,0,0.18);display:block}
    .video-overlay{position:absolute;inset:0;border-radius:12px;pointer-events:none;background:linear-gradient(135deg,rgba(0,51,102,0.06),transparent)}
    .video-play-cta{
      position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);z-index:5;
      background:rgba(0,0,0,0.6);color:#fff;padding:0.7rem 1rem;border-radius:999px;display:flex;align-items:center;gap:0.6rem;cursor:pointer;
      backdrop-filter:blur(2px)
    }
    .video-play-cta i{font-size:1.2rem}

    /* Contact */
    .contact-info{display:flex;flex-wrap:wrap;justify-content:center;margin-top:1.5rem;gap:1rem}
    .contact-item{display:flex;align-items:center;font-size:clamp(0.95rem,2vw,1.1rem)}
    .contact-item i{margin-right:0.6rem;color:var(--todini-blue)}

    /* Cards */
    .card{background:var(--light-gray);padding:0.9rem;border-radius:8px;box-shadow:none}

    /* Accessibility and focus */
    :focus{outline:3px solid #ffd54f;outline-offset:3px}
    :focus:not(:focus-visible){outline: none}
    .sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}

    /* Home button (footer) - visible on every slide */
    .home-btn{
      position:fixed;
      right:2vw;
      bottom:1.6vh;
      z-index:9999;
      width:44px;
      height:44px;
      border-radius:8px;
      border:0;
      display:flex;
      align-items:center;
      justify-content:center;
      background:rgba(255,255,255,0.95);
      color:var(--todini-blue);
      box-shadow:0 6px 18px rgba(0,0,0,0.12);
      cursor:pointer;
      transition:transform 0.15s ease, background-color 0.15s ease, color 0.15s ease;
      font-size:1.05rem;
    }
    .home-btn:focus{outline:3px solid #ffd54f;outline-offset:3px}
    .home-btn:hover{transform:translateY(-3px)}
    .home-btn .fa-home{pointer-events:none}

    /* Inverse style for dark/blue slides (white icon on transparent dark bg) */
    .home-btn.on-dark{
      background:rgba(0,0,0,0.18);
      color:#fff;
      box-shadow:0 6px 18px rgba(0,0,0,0.28);
      border:1px solid rgba(255,255,255,0.08);
    }

    /* Small label on very wide screens */
    @media(min-width:1100px){
      .home-btn{width:auto;padding:0 12px;border-radius:22px;height:44px}
      .home-btn .label{display:inline-block;margin-left:8px;font-size:0.95rem}
    }

    /* Responsive */
    @media (max-width:900px){
      .two-column{grid-template-columns:1fr;gap:1.2rem}
      .proposal-grid{grid-template-columns:1fr}
      .photo-grid{grid-template-columns:1fr}
      .photo-grid img{height:12vh}
      .reveal section{padding:3vh 4vw !important}
      .logo{height:40px}
      .home-btn{right:3vw}
    }

    @media (max-width:480px){
      .reveal section{padding:2vh 3vw !important}
      .logo{height:34px;top:1vh;left:3vw}
      .icon-list li{padding-left:42px}
      .home-btn{width:44px;height:44px;right:3vw;bottom:1.2vh}
      .home-btn .label{display:none}
    }

  </style>
</head>
<body>
  <a href="#main" class="skip-link">Salta al contenuto</a>

  <div class="reveal" role="application" aria-label="Presentazione SafeTwin">
    <div class="slides" id="main">

      <!-- 1 – Copertina -->
      <section class="blue-slide" aria-label="Copertina">
        <img src="LogoTod.png" class="logo" alt="Logo Todini" />
        <div class="content-container" style="text-align:left">
          <h1>SafeTwin Platform</h1>
          <h2>Monitoraggio predittivo per grandi infrastrutture</h2>
          <p>
            Proposta tecnica per Todini Costruzioni Generali S.p.A.<br />
            Incontro del 12 novembre 2025
          </p>
          <div aria-hidden="true" style="margin-top:1.2rem;">
            <i class="fas fa-chevron-down fa-2x" style="opacity:0.75;color:rgba(255,255,255,0.9)"></i>
          </div>
        </div>
      </section>

      <!-- 2 – Contesto Todini -->
      <section aria-label="Contesto Todini">
        <div class="content-container">
          <h2>Il contesto operativo di Todini</h2>
          <div class="two-column">
            <div class="text-content">
              <ul class="icon-list" aria-hidden="false">
                <li class="fragment"><i class="fas fa-history" aria-hidden="true"></i> &gt;70 anni di grandi opere in 50+ paesi</li>
                <li class="fragment"><i class="fas fa-road" aria-hidden="true"></i> Autostrade, viadotti, gallerie, dighe, ferrovie</li>
                <li class="fragment"><i class="fas fa-landmark" aria-hidden="true"></i> Committenti istituzionali (ANAS, RFI, BERS, Banca Mondiale)</li>
                <li class="fragment"><i class="fas fa-digital-tachograph" aria-hidden="true"></i> Obbligo crescente di digitalizzazione (PNRR, BIM 7D, ISO 45001)</li>
              </ul>
            </div>
            <div class="visual-content" aria-hidden="true">
              <div class="photo-grid">
                <img loading="lazy" src="https://images.unsplash.com/photo-1541888946425-d81bb19240f5?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80" alt="Grandi infrastrutture" />
                <img loading="lazy" src="https://images.unsplash.com/photo-1581094794329-c8112a89af12?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80" alt="Cantiere moderno" />
                <img loading="lazy" src="https://images.unsplash.com/photo-1581094794355-1d9d10c8ed6e?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80" alt="Infrastrutture complesse" />
                <img loading="lazy" src="https://images.unsplash.com/photo-1541888946425-d81bb19240f5?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80" alt="Tecnologia in cantiere" />
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- 3 – SafeTwin: cosa è -->
      <section aria-label="Che cos'è SafeTwin">
        <div class="content-container">
          <h2>SafeTwin Platform</h2>
          <div class="two-column">
            <div class="text-content">
              <p>
                Sistema SaaS integrato per il monitoraggio strutturale e geotecnico in tempo reale, con capacità
                predittive e integrazione BIM.
              </p>

              <div class="card fragment" role="region" aria-label="Architettura del flusso dati">
                <h3>Architettura del flusso dati</h3>
                <div style="display:flex;gap:1rem;align-items:center;flex-wrap:wrap;">
                  <div style="text-align:center;flex:1;min-width:120px">
                    <i class="fas fa-satellite-dish fa-2x" style="color:var(--todini-blue);" aria-hidden="true"></i>
                    <p style="font-size:0.95rem;margin:0">Sensori IoT</p>
                  </div>
                  <div aria-hidden="true"><i class="fas fa-arrow-right" style="color:var(--dark-gray)"></i></div>
                  <div style="text-align:center;flex:1;min-width:120px">
                    <i class="fas fa-cloud fa-2x" style="color:var(--todini-blue)" aria-hidden="true"></i>
                    <p style="font-size:0.95rem;margin:0">Cloud</p>
                  </div>
                  <div aria-hidden="true"><i class="fas fa-arrow-right" style="color:var(--dark-gray)"></i></div>
                  <div style="text-align:center;flex:1;min-width:120px">
                    <i class="fas fa-chart-line fa-2x" style="color:var(--todini-blue)" aria-hidden="true"></i>
                    <p style="font-size:0.95rem;margin:0">Dashboard + Allarmi + AI</p>
                  </div>
                </div>
              </div>

              <ul>
                <li class="fragment">Architettura multi-tenant, scalabile, GDPR-compliant</li>
                <li class="fragment">100% web, accessibile da cantiere (PWA)</li>
                <li class="fragment">Integrazione con sistemi esistenti (BIM, ERP)</li>
              </ul>
            </div>

            <div class="visual-content" aria-hidden="true">
              <img loading="lazy" src="https://images.unsplash.com/photo-1551288049-bebda4e38f71?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80" alt="Dashboard di monitoraggio" />
              <p class="image-caption">Esempio di dashboard di monitoraggio predittivo</p>
            </div>
          </div>
        </div>
      </section>

      <!-- 4 – Architettura tecnica -->
      <section class="blue-slide" aria-label="Architettura tecnica">
        <div class="content-container">
          <h2>Architettura tecnica</h2>
          <div class="architecture-container" role="region" aria-label="Dettagli architettura">
            <div class="architecture-layer" aria-hidden="false">
              <h3>EDGE LAYER (Cantiere)</h3>
              <div class="architecture-grid">
                <div class="architecture-item"><strong>Inclinometri</strong><div style="color:var(--todini-blue)">LoRa</div></div>
                <div class="architecture-item"><strong>Accelerometri</strong><div style="color:var(--todini-blue)">4G</div></div>
                <div class="architecture-item"><strong>Piezometri</strong><div style="color:var(--todini-blue)">NB-IoT</div></div>
                <div class="architecture-item"><strong>Webcam AI</strong><div style="color:var(--todini-blue)">RTSP</div></div>
              </div>
            </div>

            <div class="architecture-layer">
              <h3>CLOUD INGESTION LAYER</h3>
              <div class="architecture-grid">
                <div class="architecture-item"><strong>MQTT Broker</strong><div style="color:var(--todini-blue)">Mosquitto/EMQX</div><div style="font-size:0.8em;color:var(--text-gray)">TLS, QoS 2</div></div>
                <div class="architecture-item"><strong>Node-RED</strong><div style="color:var(--todini-blue)">Normalizzazione</div></div>
                <div class="architecture-item"><strong>REST API</strong><div style="color:var(--todini-blue)">FastAPI+WT</div></div>
              </div>
            </div>

            <div class="architecture-layer">
              <h3>STORAGE LAYER</h3>
              <div class="architecture-grid">
                <div class="architecture-item"><strong>Time-Series Core</strong><div style="color:var(--todini-blue)">1M+ punti/sec</div></div>
                <div class="architecture-item"><strong>PostgreSQL</strong><div style="color:var(--todini-blue)">Utenti, Config, Soglie</div></div>
                <div class="architecture-item"><strong>Redis</strong><div style="color:var(--todini-blue)">Cache Live (TTL 5 min)</div></div>
              </div>
            </div>

            <div class="architecture-layer">
              <h3>PROCESSING LAYER</h3>
              <div class="architecture-grid">
                <div class="architecture-item"><strong>ML Service</strong><div style="color:var(--todini-blue)">Python</div><div style="font-size:0.8em;color:var(--text-gray)">Prophet / LSTM</div></div>
                <div class="architecture-item"><strong>Allarmi Engine</strong><div style="color:var(--todini-blue)">Twilio SMS, FCM Push</div></div>
              </div>
            </div>

            <div class="architecture-layer">
              <h3>PRESENTATION LAYER</h3>
              <div class="architecture-grid">
                <div class="architecture-item"><strong>Grafana</strong><div style="color:var(--todini-blue)">Dashboard Live</div><div style="font-size:0.8em;color:var(--text-gray)">WebSocket</div></div>
                <div class="architecture-item"><strong>PWA Mobile</strong><div style="color:var(--todini-blue)">App Cantiere</div></div>
              </div>
            </div>
          </div>

          <p class="fragment" style="color:var(--todini-blue);font-weight:600;margin-top:1rem;text-align:center">
            Architettura modulare e scalabile, progettata per ambienti enterprise
          </p>
        </div>
      </section>

      <!-- 5 – VIDEO LOCALE CON AUTOPLAY -->
      <section aria-label="Video ripresa aerea" class="slide-with-video">
        <div class="content-container">
          <h2>Ripresa aerea di opere con webcam AI</h2>
          <div class="video-container" aria-label="Video ripresa aerea">
            <!-- video con poster per fallback e controls disattivati inizialmente -->
            <video id="site-video" poster="volo-poster.jpg" preload="metadata" playsinline muted loop>
              <source src="volo-hd_1280_720_30fps.mp4" type="video/mp4" />
              <!-- Fallback -->
              <p>Il tuo browser non supporta il video. <a href="volo-hd_1280_720_30fps.mp4" download>Scarica il video</a></p>
            </video>

            <!-- Play CTA visibile se autoplay bloccato -->
            <button id="video-cta" class="video-play-cta" aria-label="Riproduci video">
              <i class="fas fa-play" aria-hidden="true"></i><span>Riproduci</span>
            </button>

            <div class="video-overlay" aria-hidden="true"></div>
          </div>

          <p class="image-caption" style="margin-top:1rem">
            Monitoraggio in tempo reale con webcam AI integrate - Rilevamento automatico di attività e anomalie
          </p>

          <div class="card" style="margin-top:0.8rem">
            <p style="text-align:center;margin:0">
              <i class="fas fa-robot" style="color:var(--todini-green);margin-right:10px"></i>
              <strong>Integrazione webcam AI per analisi automatica di: sicurezza, progressi lavori, anomalie strutturali</strong>
            </p>
          </div>
        </div>
      </section>

      <!-- 6 – Sicurezza cantiere -->
      <section aria-label="Sicurezza cantiere">
        <div class="content-container">
          <h2>Cosa possiamo sviluppare per Todini</h2>
          <h3>1. Sicurezza cantiere</h3>
          <div class="two-column">
            <div class="text-content">
              <ul class="icon-list">
                <li class="fragment"><i class="fas fa-bell" aria-hidden="true"></i> Allarmi SMS/push in &lt; 60 secondi</li>
                <li class="fragment"><i class="fas fa-chart-line" aria-hidden="true"></i> Previsione cedimenti/vibrazioni a 24–48h</li>
                <li class="fragment"><i class="fas fa-shield-alt" aria-hidden="true"></i> Integrazione con piano HSE e procedure di emergenza</li>
              </ul>
            </div>
            <div class="visual-content" aria-hidden="true">
              <img loading="lazy" src="https://images.unsplash.com/photo-1581094794329-c8112a89af12?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80" alt="Sicurezza in cantiere" />
              <p class="image-caption">Monitoraggio sicurezza in tempo reale</p>
            </div>
          </div>
        </div>
      </section>

      <!-- 7 – Collaudo e consegna -->
      <section class="blue-slide" aria-label="Collaudo e consegna">
        <div class="content-container">
          <h2>Cosa possiamo sviluppare per Todini</h2>
          <h3>2. Collaudo e consegna opere</h3>
          <div class="two-column">
            <div class="text-content">
              <ul class="icon-list">
                <li class="fragment"><i class="fas fa-file-pdf" aria-hidden="true"></i> Report automatici PDF con trend e soglie NTC 2018</li>
                <li class="fragment"><i class="fas fa-balance-scale" aria-hidden="true"></i> Confronto dati sensori vs modello FEA</li>
                <li class="fragment"><i class="fas fa-exchange-alt" aria-hidden="true"></i> Esportazione diretta per ANAS / committente</li>
              </ul>
            </div>
            <div class="visual-content" aria-hidden="true">
              <img loading="lazy" src="https://images.unsplash.com/photo-1581094794355-1d9d10c8ed6e?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80" alt="Collaudo opere" />
              <p class="image-caption">Documentazione automatica per collaudi</p>
            </div>
          </div>
        </div>
      </section>

      <!-- 8 – Manutenzione predittiva -->
      <section aria-label="Manutenzione predittiva">
        <div class="content-container">
          <h2>Cosa possiamo sviluppare per Todini</h2>
          <h3>3. Manutenzione predittiva post-costruzione</h3>
          <div class="two-column">
            <div class="text-content">
              <ul class="icon-list">
                <li class="fragment"><i class="fas fa-eye" aria-hidden="true"></i> Sensori permanenti → SHM 24/7</li>
                <li class="fragment"><i class="fas fa-sync-alt" aria-hidden="true"></i> Digital Twin BIM aggiornato in tempo reale</li>
                <li class="fragment"><i class="fas fa-chart-line" aria-hidden="true"></i> Riduzione ispezioni manuali del 30–50%</li>
              </ul>
            </div>
            <div class="visual-content" aria-hidden="true">
              <img loading="lazy" src="https://images.unsplash.com/photo-1541888946425-d81bb19240f5?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80" alt="Manutenzione predittiva" />
              <p class="image-caption">Monitoraggio continuo infrastrutture</p>
            </div>
          </div>
        </div>
      </section>

      <!-- 9 – Proposta operativa -->
      <section class="blue-slide" aria-label="Proposta operativa">
        <div class="content-container">
          <h2>Proposta operativa</h2>

          <div class="proposal-grid" role="list">
            <div class="proposal-phase fragment" role="listitem" aria-label="Fase 1">
              <div class="phase-icon"><i class="fas fa-rocket" aria-hidden="true"></i></div>
              <h4>FASE 1: PILOTA</h4>
              <p class="duration">6 mesi</p>
              <p>10–15 sensori + dashboard + allarmi</p>
              <p style="font-size:0.9em;margin-top:0.5rem;color:var(--todini-blue)">Implementazione su 1 cantiere pilota</p>
            </div>

            <div class="proposal-phase fragment" role="listitem" aria-label="Fase 2">
              <div class="phase-icon"><i class="fas fa-graduation-cap" aria-hidden="true"></i></div>
              <h4>FASE 2: FORMAZIONE</h4>
              <p class="duration">2 sessioni</p>
              <p>PM + HSE + ingegneri</p>
              <p style="font-size:0.9em;margin-top:0.5rem;color:var(--todini-blue)">Training completo del personale</p>
            </div>

            <div class="proposal-phase fragment" role="listitem" aria-label="Fase 3">
              <div class="phase-icon"><i class="fas fa-expand-arrows-alt" aria-hidden="true"></i></div>
              <h4>FASE 3: SCALABILITÀ</h4>
              <p class="duration">Dopo pilota</p>
              <p>Altri cantieri / white-label</p>
              <p style="font-size:0.9em;margin-top:0.5rem;color:var(--todini-blue)">Estensione a tutte le opere Todini</p>
            </div>
          </div>

          <div class="card" style="margin-top:1rem">
            <p style="text-align:center;margin:0">
              <i class="fas fa-info-circle" aria-hidden="true"></i>
              <strong>Impegno risorse Todini da valutare</strong>
            </p>
          </div>
        </div>
      </section>

      <!-- 10 – Chiusura -->
      <section class="blue-slide" aria-label="Chiusura">
        <div class="content-container" style="text-align:center">
          <h1>Grazie</h1>
          <p>Siamo pronti a partire con il pilota.<br />Attendiamo le vostre priorità per definire il perimetro esatto.</p>
          <div class="contact-info" role="contentinfo">
            <div class="contact-item"><i class="fas fa-user" aria-hidden="true"></i><span>Alberto Finelli</span></div>
            <div class="contact-item"><i class="fas fa-briefcase" aria-hidden="true"></i><span>Project Director &amp; Software Architect</span></div>
          </div>
        </div>
      </section>

    </div>

    <!-- Pulsante Home (footer) comune a tutte le slide -->
    <button id="home-btn" class="home-btn" aria-label="Vai alla copertina" title="Home (Vai alla copertina)">
      <i class="fas fa-home" aria-hidden="true"></i><span class="label">Home</span>
    </button>

  </div>

  <noscript>
    <div style="padding:1rem;background:#fff8c4;color:#332a00">JavaScript è necessario per visualizzare la presentazione correttamente. Abilita JavaScript o scarica il PDF della presentazione.</div>
  </noscript>

  <!-- Script caricati in fondo per performance -->
  <script src="https://cdn.jsdelivr.net/npm/reveal.js@4.6.0/dist/reveal.min.js" defer></script>
  <script>
    // Inizializzazione Reveal e gestione video + pulsante home
    window.addEventListener('DOMContentLoaded', function () {
      Reveal.initialize({
        hash: true,
        controls: true,
        progress: true,
        center: false,
        transition: 'fade',
        backgroundTransition: 'fade',
        autoPlayMedia: false,
        width: '100%',
        height: '100%',
        margin: 0,
        minScale: 0.1,
        maxScale: 2.0,
        viewDistance: 3,
      });

      const video = document.getElementById('site-video');
      const cta = document.getElementById('video-cta');
      const homeBtn = document.getElementById('home-btn');

      // Utility: pausa tutti i video (quando si cambia slide)
      function pauseAllVideos() {
        document.querySelectorAll('video').forEach(v => {
          try { v.pause(); } catch (e) {}
        });
      }

      // Vai alla copertina (prima slide index 0)
      function goHome() {
        try {
          Reveal.slide(0, 0);
          const firstSlide = document.querySelector('.reveal .slides section');
          if (firstSlide) firstSlide.setAttribute('tabindex', '-1'), firstSlide.focus();
        } catch (e) {
          location.hash = '/';
        }
      }

      // Pulsante home: click
      if (homeBtn) {
        homeBtn.addEventListener('click', function (ev) {
          ev.preventDefault();
          goHome();
        });
      }

      // On slide change: stop videos, try to autoplay if slide contains the video,
      // and toggle home button style when current slide is dark/blue.
      Reveal.addEventListener('slidechanged', function (event) {
        pauseAllVideos();

        const current = event.currentSlide;
        if (current) {
          const v = current.querySelector('video');
          if (v) {
            v.play().then(() => {
              if (cta) cta.style.display = 'none';
              v.muted = true;
            }).catch(() => {
              if (cta) cta.style.display = 'flex';
            });
          } else {
            if (cta) cta.style.display = 'none';
          }

          // Toggle home button visual for dark slides
          if (current.classList.contains('blue-slide')) {
            homeBtn.classList.add('on-dark');
            homeBtn.setAttribute('aria-label', 'Vai alla copertina (colore chiaro attivo)');
          } else {
            homeBtn.classList.remove('on-dark');
            homeBtn.setAttribute('aria-label', 'Vai alla copertina');
          }
        }
      });

      // On initial load, attempt to autoplay video if active, and set home button style
      const activeSlide = document.querySelector('.reveal .slides section.present') || document.querySelector('section:nth-child(5)');
      if (activeSlide) {
        if (activeSlide.classList.contains('blue-slide')) {
          homeBtn.classList.add('on-dark');
        } else {
          homeBtn.classList.remove('on-dark');
        }

        const v = activeSlide.querySelector('video');
        if (v) {
          v.play().then(() => {
            if (cta) cta.style.display = 'none';
            v.muted = true;
          }).catch(() => {
            if (cta) cta.style.display = 'flex';
          });
        }
      }

      // CTA click -> user gesture to play video
      if (cta && video) {
        cta.addEventListener('click', function () {
          video.muted = false;
          video.play().then(() => {
            cta.style.display = 'none';
          }).catch(() => {
            alert('Riproduzione non avviata. Per favore interagisci nuovamente con la pagina.');
          });
        });
      }

      // Accessibility: keyboard shortcut "h" per tornare alla home (solo quando non in campo input)
      document.addEventListener('keydown', function (ev) {
        const activeTag = document.activeElement && document.activeElement.tagName.toLowerCase();
        if ((ev.key === 'h' || ev.key === 'H') && activeTag !== 'input' && activeTag !== 'textarea') {
          ev.preventDefault();
          goHome();
        }

        // Space toggles video play/pause when focused on video or CTA
        if (ev.key === ' ' || ev.key === 'Spacebar') {
          const focused = document.activeElement;
          if (focused === cta || focused === video) {
            ev.preventDefault();
            if (video.paused) video.play().catch(()=>{});
            else video.pause();
          }
        }
      });

      // Ensure we pause videos when page is hidden (save CPU/battery)
      document.addEventListener('visibilitychange', function () {
        if (document.hidden) pauseAllVideos();
      });
    });
  </script>
</body>
</html>
